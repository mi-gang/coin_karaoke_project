<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>:: 노래방 예약</title>
    <link rel="stylesheet" href="/css/common.css" />
    <link rel="stylesheet" href="/css/kkReservationUI.css" />

    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@100..900&display=swap"
      rel="stylesheet"
    />
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC"
      crossorigin="anonymous"
    />
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM"
      crossorigin="anonymous"
    ></script>
  </head>

  <body>
    <!-- 모바일 컨테이너 -->
    <div id="mobileContainer">
      <!--헤더-->
      <header>
        <img src="/img/left arrow.svg" alt="이전 페이지 이동" />
        <span>스타버스 코인노래방</span>
      </header>
      <!-- 컨텐츠 컨테이너 -->
      <div id="container">
        <div class="infoTxt">* <span>보라색</span>은 청소시간입니다.</div>
        <div class="timeTableContainer">
          <div class="timeLine"></div>
          <div class="roomNTimeTableContainer">
            <div class="contents timeTable-row">
              <div id="roomTypeName" class="roomType btn">2인실 (1)</div>
              <div class="timeRow">
                <div class="time emptyTime" style="width: 105px"></div>

                <div
                  class="time usedTime"
                  data-bs-toggle="popover"
                  data-bs-trigger="hover"
                  data-bs-content="18:00~18:25 예약 불가"
                  style="width: 105px"
                ></div>
                <div
                  class="time cleaningTime"
                  data-bs-toggle="popover"
                  data-bs-trigger="hover"
                  data-bs-content="18:00~18:25 예약 불가"
                  style="width: 30px"
                ></div>
              </div>
            </div>
            <div class="contents timeTable-row">
              <div id="roomTypeName" class="roomType btn">2인실 (1)</div>
              <div class="timeRow">
                <div class="time emptyTime" style="width: 105px"></div>

                <div
                  class="time usedTime"
                  data-bs-toggle="popover"
                  data-bs-trigger="hover"
                  data-bs-content="18:00~18:25 예약 불가"
                  style="width: 105px"
                ></div>
                <div
                  class="time cleaningTime"
                  data-bs-toggle="popover"
                  data-bs-trigger="hover"
                  data-bs-content="18:00~18:25 예약 불가"
                  style="width: 30px"
                ></div>
              </div>
            </div>
            <div class="contents timeTable-row">
              <div id="roomTypeName" class="roomType btn">2인실 (1)</div>
              <div class="timeRow">
                <div class="time emptyTime" style="width: 105px"></div>

                <div
                  class="time usedTime"
                  data-bs-toggle="popover"
                  data-bs-trigger="hover"
                  data-bs-content="18:00~18:25 예약 불가"
                  style="width: 105px"
                ></div>
                <div
                  class="time cleaningTime"
                  data-bs-toggle="popover"
                  data-bs-trigger="hover"
                  data-bs-content="18:00~18:25 예약 불가"
                  style="width: 30px"
                ></div>
              </div>
            </div>
            <div class="contents timeTable-row">
              <div id="roomTypeName" class="roomType btn">2인실 (1)</div>
              <div class="timeRow">
                <div class="time emptyTime" style="width: 105px"></div>

                <div
                  class="time usedTime"
                  data-bs-toggle="popover"
                  data-bs-trigger="hover"
                  data-bs-content="18:00~18:25 예약 불가"
                  style="width: 105px"
                ></div>
                <div
                  class="time cleaningTime"
                  data-bs-toggle="popover"
                  data-bs-trigger="hover"
                  data-bs-content="18:00~18:25 예약 불가"
                  style="width: 30px"
                ></div>
              </div>
            </div>
            <div class="contents timeTable-row">
              <div id="roomTypeName" class="roomType btn">2인실 (1)</div>
              <div class="timeRow">
                <div class="time emptyTime" style="width: 105px"></div>

                <div
                  class="time usedTime"
                  data-bs-toggle="popover"
                  data-bs-trigger="hover"
                  data-bs-content="18:00~18:25 예약 불가"
                  style="width: 105px"
                ></div>
                <div
                  class="time cleaningTime"
                  data-bs-toggle="popover"
                  data-bs-trigger="hover"
                  data-bs-content="18:00~18:25 예약 불가"
                  style="width: 30px"
                ></div>
              </div>
            </div>
            <div class="contents timeTable-row">
              <div id="roomTypeName" class="roomType btn">2인실 (1)</div>
              <div class="timeRow">
                <div class="time emptyTime" style="width: 105px"></div>

                <div
                  class="time usedTime"
                  data-bs-toggle="popover"
                  data-bs-trigger="hover"
                  data-bs-content="18:00~18:25 예약 불가"
                  style="width: 105px"
                ></div>
                <div
                  class="time cleaningTime"
                  data-bs-toggle="popover"
                  data-bs-trigger="hover"
                  data-bs-content="18:00~18:25 예약 불가"
                  style="width: 30px"
                ></div>
              </div>
            </div>
            <div class="contents timeTable-row">
              <div id="roomTypeName" class="roomType btn">2인실 (1)</div>
              <div class="timeRow">
                <div class="time emptyTime" style="width: 105px"></div>

                <div
                  class="time usedTime"
                  data-bs-toggle="popover"
                  data-bs-trigger="hover"
                  data-bs-content="18:00~18:25 예약 불가"
                  style="width: 105px"
                ></div>
                <div
                  class="time cleaningTime"
                  data-bs-toggle="popover"
                  data-bs-trigger="hover"
                  data-bs-content="18:00~18:25 예약 불가"
                  style="width: 30px"
                ></div>
              </div>
            </div>
            <div class="contents timeTable-row">
              <div id="roomTypeName" class="roomType btn">2인실 (1)</div>
              <div class="timeRow">
                <div class="time emptyTime" style="width: 105px"></div>

                <div
                  class="time usedTime"
                  data-bs-toggle="popover"
                  data-bs-trigger="hover"
                  data-bs-content="18:00~18:25 예약 불가"
                  style="width: 105px"
                ></div>
                <div
                  class="time cleaningTime"
                  data-bs-toggle="popover"
                  data-bs-trigger="hover"
                  data-bs-content="18:00~18:25 예약 불가"
                  style="width: 30px"
                ></div>
              </div>
            </div>
            <div class="contents timeTable-row">
              <div id="roomTypeName" class="roomType btn">2인실 (1)</div>
              <div class="timeRow">
                <div class="time emptyTime" style="width: 105px"></div>

                <div
                  class="time usedTime"
                  data-bs-toggle="popover"
                  data-bs-trigger="hover"
                  data-bs-content="18:00~18:25 예약 불가"
                  style="width: 105px"
                ></div>
                <div
                  class="time cleaningTime"
                  data-bs-toggle="popover"
                  data-bs-trigger="hover"
                  data-bs-content="18:00~18:25 예약 불가"
                  style="width: 30px"
                ></div>
              </div>
            </div>
            <div class="contents timeTable-row">
              <div id="roomTypeName" class="roomType btn">2인실 (1)</div>
              <div class="timeRow">
                <div class="time emptyTime" style="width: 105px"></div>

                <div
                  class="time usedTime"
                  data-bs-toggle="popover"
                  data-bs-trigger="hover"
                  data-bs-content="18:00~18:25 예약 불가"
                  style="width: 105px"
                ></div>
                <div
                  class="time cleaningTime"
                  data-bs-toggle="popover"
                  data-bs-trigger="hover"
                  data-bs-content="18:00~18:25 예약 불가"
                  style="width: 30px"
                ></div>
              </div>
            </div>
            <div class="contents timeTable-row">
              <div id="roomTypeName" class="roomType btn">2인실 (1)</div>
              <div class="timeRow">
                <div class="time emptyTime" style="width: 105px"></div>

                <div
                  class="time usedTime"
                  data-bs-toggle="popover"
                  data-bs-trigger="hover"
                  data-bs-content="18:00~18:25 예약 불가"
                  style="width: 105px"
                ></div>
                <div
                  class="time cleaningTime"
                  data-bs-toggle="popover"
                  data-bs-trigger="hover"
                  data-bs-content="18:00~18:25 예약 불가"
                  style="width: 30px"
                ></div>
              </div>
            </div>
            <div class="contents timeTable-row">
              <div id="roomTypeName" class="roomType btn">2인실 (1)</div>
              <div class="timeRow">
                <div class="time emptyTime" style="width: 105px"></div>

                <div
                  class="time usedTime"
                  data-bs-toggle="popover"
                  data-bs-trigger="hover"
                  data-bs-content="18:00~18:25 예약 불가"
                  style="width: 105px"
                ></div>
                <div
                  class="time cleaningTime"
                  data-bs-toggle="popover"
                  data-bs-trigger="hover"
                  data-bs-content="18:00~18:25 예약 불가"
                  style="width: 30px"
                ></div>
              </div>
            </div>
          </div>

          <!-- 예약하기 모달(#modal1) -->
          <div id="modal1" class="modal reservationContainer">
            <div class="modalWrapper">
              <div class="closeIconWrapper">
                <img
                  src="../img/close.svg"
                  alt="모달창 닫기"
                  class="closeBtn"
                />
              </div>
              <div class="reservationFormContainer">
                <p class="modalTitle">예약하기</p>
                <div class="roomSelecBoxContainer">
                  <div class="roomBox">
                    <button class="label">예약하실 방을 선택해주세요.</button>
                    <img src="../img/down arrow.svg" alt="드롭다운" />
                    <ul class="roomList"></ul>
                  </div>
                </div>
                <div class="reservationTimeFormContainer">
                  <p class="reservateDate"></p>
                  <div class="timeWrapper">
                    <div class="timeType">시작 시간</div>
                    <div class="timeSettingWrapper">
                      <div id="startTime" class="timeSettingItem">
                        <input id="hiddenTime1" type="hidden" />
                        <input
                          id="startTimeInput"
                          readonly
                          placeholder="-- : --"
                          value=""
                        />
                        <img src="../img/down arrow.svg" alt="드롭다운" />
                      </div>
                    </div>
                  </div>
                  <div class="timeWrapper">
                    <div class="timeType">이용 시간</div>
                    <div class="timeSettingWrapper">
                      <div id="hoursOfUse" class="timeSettingItem item3">
                        <input id="hiddenTime2" type="hidden" />
                        <input readonly placeholder="-- : --" />
                        <img src="../img/down arrow.svg" alt="드롭다운" />
                      </div>
                    </div>
                  </div>
                  <div class="timeWrapper">
                    <div class="timeType">이용 종료 시간</div>
                    <div class="timeSettingWrapper">
                      <div id="endTime" class="timeSettingItem">
                        <input id="hiddenTime3" type="hidden" />
                        <input
                          id="endTimeInput"
                          readonly
                          placeholder="-- : --"
                        />
                      </div>
                    </div>
                  </div>
                  <div class="m1btnContainer">
                    <div class="btn cancel">취소</div>
                    <div class="btn submit">예약</div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
        <!-- 하단 메뉴바 -->
      </div>
      <nav>
        <div id="reservationBtn" class="reservation Yusbtn">예약하기</div>
      </nav>

      <script>
        //bootstrap popover
        var popoverTriggerList = [].slice.call(
          document.querySelectorAll('[data-bs-toggle="popover"]')
        );
        var popoverList = popoverTriggerList.map(function (popoverTriggerEl) {
          return new bootstrap.Popover(popoverTriggerEl);
        });
      </script>

      <!-- 시작시간 설정 모달(#modal2) -->
      <div id="modal2" class="modal startTime">
        <div class="modalContent">
          <div class="searchDate"></div>
          <div class="timeSettingWrapper">
            <div class="timeTypeWrapper">
              <div class="timeType">AM</div>
              <div class="timeType">PM</div>
            </div>
            <div class="timeWrapper">
              <div id="hour" class="time">
                <p>시</p>
                <input name="hour" type="number" />
              </div>
              <span>:</span>
              <div id="minute" class="time">
                <p>분</p>
                <input name="minute" type="number" required />
              </div>
            </div>
          </div>
          <div class="btnWrapper">
            <div class="btn cancel">취소</div>
            <div class="btn setting">설정</div>
          </div>
        </div>
      </div>

      <!-- 이용시간 설정 모달(#modal3) -->
      <div id="modal3" class="modal usingTime">
        <div class="modalContent">
          <p class="subTitle">이용 시간</p>
          <div class="timeWrapper">
            <div id="hour" class="time">
              <p>시</p>
              <input name="hour" type="number" />
            </div>
            <span>:</span>
            <div id="minute" class="time">
              <p>분</p>
              <input name="minute" type="number" required />
            </div>
          </div>
          <div class="btnContainer">
            <div id="usingTimeCancelBtn" class="btn cancel">취소</div>
            <div id="usingTimeSettingBtn" class="btn setting">설정</div>
          </div>
        </div>
      </div>

      <!-- 예약 내용 확인 모달(#modal4) -->
      <div id="modal4" class="modal checkReservation">
        <div class="modalWrapper">
          <div class="closeIconWrapper">
            <img src="../img/close.svg" alt="모달창 닫기" class="closeBtn" />
          </div>
          <div class="reservationFormContainer">
            <p class="modalTitle">예약 내용을<br />다시 한 번 확인해주세요</p>
            <div class="kkRoomInfo">
              <span class="kkRoomName"></span>
              <!--선택한 노래방 상호명_피그마: 스타버스 코인노래방-->
              <span class="kkRoomType"></span>
              <!--#modal1에서 선택한 노래방 타입-->
            </div>
            <div class="reservateDate"></div>
            <div class="reservationTimeFormContainer">
              <div class="timeWrapper">
                <div class="timeType">시작 시간</div>
                <div class="timeSettingWrapper">
                  <div id="startTime" class="timeSettingItem">
                    <input id="hiddenTime1" type="hidden" />
                    <input
                      id="startTimeInput"
                      readonly
                      placeholder="-- : --"
                      value=""
                    />
                  </div>
                </div>
              </div>
              <div class="timeWrapper">
                <div class="timeType">이용 시간</div>
                <div class="timeSettingWrapper">
                  <div id="hoursOfUse" class="timeSettingItem item3">
                    <input id="hiddenTime2" type="hidden" />
                    <input readonly placeholder="-- : --" />
                  </div>
                </div>
              </div>
              <div class="timeWrapper">
                <div class="timeType">이용 종료 시간</div>
                <div class="timeSettingWrapper">
                  <div id="endTime" class="timeSettingItem">
                    <input id="hiddenTime3" type="hidden" />
                    <input id="endTimeInput" readonly placeholder="-- : --" />
                  </div>
                </div>
              </div>
              <p class="paymentInfo">결제금액: <span>4,000</span>원</p>
              <div class="m4btnContainer">
                <div class="btn back">이전</div>
                <!--클릭 시, #modal4 창 닫고, #modal3 보이기-->
                <div class="btn submit">결제</div>
                <!--클릭 시, #modal4 창 닫고,결제 완료 모달(#modal5) 보이기-->
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- 결제 및 예약 완료 모달(#modal5) -->
    <div id="modal5" class="modal5Background">
      <div class="modal">
        <div class="contentsContainer">
          <p class="largeTxt">결제 및 예약이<br />확정되었습니다.</p>
          <p class="smallTxt">
            이용 시작 <span>20분 전</span>부터는 취소 수수료가<br />부과되는 점
            참고해주세요!
          </p>
          <a href="controller?cmd=reservationListUI"
            ><div class="btn">나의 예약 보기</div></a
          >
        </div>
      </div>
    </div>

    <script>
      // let kkRoomCnt = $(".roomType").length;
      let kkRoomCnt = 12; // 노래방 방 개수 데이터 불러와서 넣을 곳
      let kkRoomList = [
        "2인실(1)",
        "2인실(2)",
        "2인실(3)",
        "2인실(4)",
        "4인실(1)",
        "4인실(2)",
        "단체실",
      ]; // 노래방 방 정보 넣을 곳
      let dropBox = $(".label");

      // 방 선택 드롭박스에 불러온 방 정보 채우기
      for (let i = 0; i < kkRoomList.length; i++) {
        $(".roomList").append(
          "<li class='roomItem'>" + kkRoomList[i] + "</li>"
        );
      }

      // 현재 날짜, 시간 정보
      let now = new Date();
      let currentHour = now.getHours();

      for (let i = 0; i < 24; i++) {
        let hour = currentHour + i;
        if (hour > 24) {
          hour = hour - 24;
        }
        $(".timeLine").append("<div class='time'>" + hour + ":00</div");
      }

      function numericDayToKorean(numericDay) {
        result = "";
        switch (numericDay) {
          case 0:
            result = "일";
            break;
          case 1:
            result = "월";
            break;
          case 2:
            result = "화";
            break;
          case 3:
            result = "수";
            break;
          case 4:
            result = "목";
            break;
          case 5:
            result = "금";
            break;
          case 6:
            result = "토";
            break;
        }
        return result;
      }

      $("#reservationBtn").on("click", showModal1);
      $("#modal1 .closeIconWrapper, #modal1 .btn.cancel").on(
        "click",
        hideModal1
      );
      $("#startTime").on("click", showModal2);
      $("#modal2 .btn.setting, #modal2 .btn.cancel").on("click", hideModal2);

      $("#hoursOfUse").on("click", showModal3);
      $("#modal3 .btn.setting, #modal3 .btn.cancel").on("click", hideModal3);
      $("#modal1 .btn.submit").on("click", showModal4);
      $("#modal4 .closeIconWrapper, #modal4 .btn.back").on("click", hideModal4);
      $("#modal4 .btn.submit").on("click", showModal5);

      function showModal1() {
        $("#modal1").css("display", "flex");
      }
      function showModal2() {
        $("#modal2").css("display", "flex");
      }
      function showModal3() {
        $("#modal3").css("display", "flex");
      }
      function showModal4() {
        $("#modal4").css("display", "flex");
      }
      function showModal5() {
        $("#modal5").css("display", "flex");
      }
      function hideModal1() {
        $("#modal1").css("display", "none");
      }
      function hideModal2() {
        $("#modal2").css("display", "none");
      }
      function hideModal3() {
        $("#modal3").css("display", "none");
      }
      function hideModal4() {
        $("#modal4").css("display", "none");
      }
    </script>
  </body>
</html>
